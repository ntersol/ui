<h2>Mortgage Payment Calculator</h2>
<p>Calculate how much your monthly mortgage payment could be.</p>
<div class="row">
    <div class="col-12 col-md-4 col-xl-2">
        <label for="loanAmount">Loan Amount</label>
        <span class="mtg-calc-input p-input-icon-left">
            <i class="pi pi-dollar"></i>
            <input class="p-inputtext" id="loanAmount" type="number" [(ngModel)]="config.loanAmount"
                (ngModelChange)="calculatePayments()" pInputText>
        </span>
    </div>
    <div class="col-12 col-md-4 col-xl-2">
        <label for="terms">Term (years)</label>
        <input class="mtg-calc-input p-inputtext" type="number" id="terms" [(ngModel)]="config.terms"
            (ngModelChange)="calculatePayments()" pInputText>
    </div>
    <div class="col-12 col-md-4 col-xl-2">
        <label for="interestRate">Interest Rate</label>
        <span class="mtg-calc-input p-input-icon-right">
            <i class="pi pi-percentage"></i>
            <input class="p-inputtext" id="interestRate" [(ngModel)]="config.interestRate"
                (ngModelChange)="calculatePayments()" type="number" pInputText>
        </span>
    </div>
    <p-divider class="d-none d-xl-block col-1" layout="vertical"></p-divider>
    <div class="col-12 col-md-7 col-xl-5">
        <h3>Monthly Payment</h3>
        <span class="mtg-calc-amt">{{ monthlyAmount | currency }}</span>
        <p-divider></p-divider>
        <div class="row">
            <div class="col-6">
                <h4>Principle</h4>
                <span>{{ (amortization.length ? amortization[0].principle : 0) | currency}}</span>
            </div>
            <div class="col-6">
                <h4>Interest</h4>
                <span>{{ (amortization.length ? amortization[0].interest : 0) | currency}}</span>
            </div>
        </div>
    </div>
</div>
<div class="row mtg-calc-btns">
    <div class="col-12 text-right">
        <button type="button" class="btn btn-primary" (click)="toggleSchedule()">View Amortization Schedule</button>
    </div>
</div>
<p-dialog header="Amortization Schedule" position="top" [(visible)]="showAmortization" [modal]="true"
    [style]="{width: '80vw'}" [draggable]="false" [resizable]="false">
    <table class="table">
        <thead>
            <tr>
                <th scope="col" class="text-center">Payment #</th>
                <th scope="col" class="text-right">Principle</th>
                <th scope="col" class="text-right">Interest</th>
                <th scope="col" class="text-right">Principle Balance</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let payment of amortization; let i = index">
                <th scope="row" class="text-center">{{i + 1}}</th>
                <td class="text-right">{{payment.principle | currency}}</td>
                <td class="text-right">{{payment.interest | currency}}</td>
                <td class="text-right">{{payment.balance | currency}}</td>
            </tr>
        </tbody>
    </table>
</p-dialog>