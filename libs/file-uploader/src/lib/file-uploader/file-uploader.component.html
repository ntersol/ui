<div
  class="nts-file-uploader"
  *ngIf="{
    filesOutput: filesOutput$ | async,
    state: state$ | async,
    fileSizes: fileSizes$ | async
  } as comp"
>
  <!-- Error handling -->
  <div class="nts-file-uploader-error" *ngIf="comp.state?.errors?.length">
    <p-message
      styleClass="w-100 mb-1"
      severity="error"
      [text]="error"
      *ngFor="let error of comp.state?.errors"
    ></p-message>
  </div>

  <label class="nts-file-uploader-label" [for]="id" *ngIf="!comp?.filesOutput">
    <div class="nts-file-uploader-icon" [ngClass]="{ 'custom-icon': iconCustom }" [innerHtml]="iconCustom"></div>
    <div class="nts-file-uploader-title" *ngIf="title" [innerHtml]="title"></div>
    <div class="nts-file-uploader-description" *ngIf="title" [innerHtml]="description"></div>
    <input
      [id]="id"
      class="nts-file-uploader-input"
      [multiple]="multiple ? 'multiple' : null"
      type="file"
      (change)="filesChanged($event)"
    />
  </label>
  <ng-container *ngIf="comp?.filesOutput">
    <a class="nts-file-uploader-reset" (click)="reset()">Remove</a>
    <p><strong>Files to be uploaded</strong></p>
    <div class="nts-file-row">
      <ng-container *ngFor="let url of comp?.filesOutput?.fileReader; let i = index">
        <div class="preview" style="max-width: 33%">
          <img class="nts-file-uploader-img" width="50px" *ngIf="url" [src]="url" />
        </div>

        <div
          class="filename"
          style="max-width: 33%"
          *ngIf="comp?.filesOutput?.files?.length"
          [innerHtml]="comp!.filesOutput!.files![i].name"
        ></div>

        <div
          class="filesize"
          style="max-width: 33%"
          *ngIf="comp?.fileSizes?.length"
          [innerHtml]="(comp?.fileSizes)![i]"
        ></div>
      </ng-container>
    </div>
  </ng-container>
</div>
