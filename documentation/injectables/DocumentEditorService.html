<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>ntersol documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css" media="(prefers-color-scheme: dark)">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">ntersol documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">







<ol class="breadcrumb">
  <li>Injectables</li>
  <li >DocumentEditorService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>libs/document-editor/src/lib/shared/document-editor.service.ts</code>
        </p>





            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_documentsModel" >_documentsModel</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_documentsModelSrc" >_documentsModelSrc</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_state" >_state</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_viewModels" >_viewModels</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#documentsModel$" >documentsModel$</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#dragIndex" >dragIndex</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#pdfJs" >pdfJs</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#state$" >state$</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#subs" >subs</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#viewModels$" >viewModels$</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#docReset" >docReset</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getDocument" >getDocument</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#pageActiveChange" >pageActiveChange</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#pageActiveNext" >pageActiveNext</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#pageActivePrevious" >pageActivePrevious</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#pagegSelectionReset" >pagegSelectionReset</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#pageReorder" >pageReorder</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#pageReset" >pageReset</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#pageSelectionChange" >pageSelectionChange</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#pageStateChange" >pageStateChange</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#pageStateChangeAll" >pageStateChangeAll</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#reset" >reset</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#scriptsLoad" >scriptsLoad</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#scrollBarAdd" >scrollBarAdd</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#stateChange" >stateChange</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#stateChanges" >stateChanges</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#tabChange" >tabChange</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor()</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="70" class="link-to-prism">libs/document-editor/src/lib/shared/document-editor.service.ts:70</a></div>
                            </td>
                        </tr>

            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="docReset"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>docReset</b></span>
                        <a href="#docReset"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>docReset()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="330"
                            class="link-to-prism">libs/document-editor/src/lib/shared/document-editor.service.ts:330</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Reset pages to their original configuration
TODO: Reset state too such as selection</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getDocument"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>getDocument</b></span>
                        <a href="#getDocument"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getDocument(srcs: NtsDocumentEditor.InputTypes[] | null, multipleAction: <a href="../interfaces/Action.html" target="_self">NtsDocumentEditor.MultipleAction</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="383"
                            class="link-to-prism">libs/document-editor/src/lib/shared/document-editor.service.ts:383</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Extract the documents from pdf JS, add to state</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>srcs</td>
                                    <td>
                                            <code>NtsDocumentEditor.InputTypes[] | null</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>multipleAction</td>
                                    <td>
                                                <code><a href="../interfaces/Action.html" target="_self" >NtsDocumentEditor.MultipleAction</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="pageActiveChange"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>pageActiveChange</b></span>
                        <a href="#pageActiveChange"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>pageActiveChange(pageActive: <a href="../interfaces/Page.html" target="_self">NtsDocumentEditor.PageActive</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="232"
                            class="link-to-prism">libs/document-editor/src/lib/shared/document-editor.service.ts:232</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Change the active visible page in the viewer</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>pageActive</td>
                                    <td>
                                                <code><a href="../interfaces/Page.html" target="_self" >NtsDocumentEditor.PageActive</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="pageActiveNext"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>pageActiveNext</b></span>
                        <a href="#pageActiveNext"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>pageActiveNext()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="240"
                            class="link-to-prism">libs/document-editor/src/lib/shared/document-editor.service.ts:240</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Go to the next available page in the document</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="pageActivePrevious"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>pageActivePrevious</b></span>
                        <a href="#pageActivePrevious"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>pageActivePrevious()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="255"
                            class="link-to-prism">libs/document-editor/src/lib/shared/document-editor.service.ts:255</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Go to the previous page available in the document</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="pagegSelectionReset"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>pagegSelectionReset</b></span>
                        <a href="#pagegSelectionReset"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>pagegSelectionReset()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="201"
                            class="link-to-prism">libs/document-editor/src/lib/shared/document-editor.service.ts:201</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Reset selection</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="pageReorder"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>pageReorder</b></span>
                        <a href="#pageReorder"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>pageReorder(docIndex: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, pageDestination: <a href="../interfaces/Page.html" target="_self">NtsDocumentEditor.Page | null</a>, side: "left" | "right")</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="271"
                            class="link-to-prism">libs/document-editor/src/lib/shared/document-editor.service.ts:271</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Reorder the pages</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>docIndex</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>pageDestination</td>
                                    <td>
                                                <code><a href="../interfaces/Page.html" target="_self" >NtsDocumentEditor.Page | null</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>side</td>
                                    <td>
                                            <code>&quot;left&quot; | &quot;right&quot;</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="pageReset"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>pageReset</b></span>
                        <a href="#pageReset"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>pageReset(srcDoc: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, page: <a href="../interfaces/Page.html" target="_self">NtsDocumentEditor.Page</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="210"
                            class="link-to-prism">libs/document-editor/src/lib/shared/document-editor.service.ts:210</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Return a page to it&#39;s original document</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>srcDoc</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>page</td>
                                    <td>
                                                <code><a href="../interfaces/Page.html" target="_self" >NtsDocumentEditor.Page</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="pageSelectionChange"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>pageSelectionChange</b></span>
                        <a href="#pageSelectionChange"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>pageSelectionChange(docIndex: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, pageIndex: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, setSelection?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank">boolean</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="186"
                            class="link-to-prism">libs/document-editor/src/lib/shared/document-editor.service.ts:186</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Change the selection status of a page</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>docIndex</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>pageIndex</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>setSelection</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="pageStateChange"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>pageStateChange</b></span>
                        <a href="#pageStateChange"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>pageStateChange(pageIndex: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, stateNew: <a href="../interfaces/Page.html" target="_self">Partial&lt;NtsDocumentEditor.Page&gt;</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="155"
                            class="link-to-prism">libs/document-editor/src/lib/shared/document-editor.service.ts:155</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Change the state of a page</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>pageIndex</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>stateNew</td>
                                    <td>
                                                <code><a href="../interfaces/Page.html" target="_self" >Partial&lt;NtsDocumentEditor.Page&gt;</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="pageStateChangeAll"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>pageStateChangeAll</b></span>
                        <a href="#pageStateChangeAll"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>pageStateChangeAll(prop: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, value: string | number | boolean | NtsDocumentEditor.Resolver)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="171"
                            class="link-to-prism">libs/document-editor/src/lib/shared/document-editor.service.ts:171</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Change the state of all pages</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>prop</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>value</td>
                                    <td>
                                            <code>string | number | boolean | NtsDocumentEditor.Resolver</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="reset"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>reset</b></span>
                        <a href="#reset"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>reset()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="422"
                            class="link-to-prism">libs/document-editor/src/lib/shared/document-editor.service.ts:422</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Reset editor state</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="scriptsLoad"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>scriptsLoad</b></span>
                        <a href="#scriptsLoad"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>scriptsLoad(pdfJsSrc: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, pdfJsWorkerSrc: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="359"
                            class="link-to-prism">libs/document-editor/src/lib/shared/document-editor.service.ts:359</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Load pdfJs, set path to worker file</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>pdfJsSrc</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>pdfJsWorkerSrc</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="scrollBarAdd"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>scrollBarAdd</b></span>
                        <a href="#scrollBarAdd"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>scrollBarAdd(scrollbarRef: HTMLDivElement)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="129"
                            class="link-to-prism">libs/document-editor/src/lib/shared/document-editor.service.ts:129</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Add a scrollbar for handy reasons
TODO: Edge case, cancel previous scrollbar sub before adding new one</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>scrollbarRef</td>
                                    <td>
                                            <code>HTMLDivElement</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="stateChange"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>stateChange</b></span>
                        <a href="#stateChange"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>stateChange(state: <a href="../interfaces/State.html" target="_self">Partial&lt;NtsDocumentEditor.State&gt;</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="145"
                            class="link-to-prism">libs/document-editor/src/lib/shared/document-editor.service.ts:145</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Change component state</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>state</td>
                                    <td>
                                                <code><a href="../interfaces/State.html" target="_self" >Partial&lt;NtsDocumentEditor.State&gt;</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="stateChanges"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>stateChanges</b></span>
                        <a href="#stateChanges"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>stateChanges()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="77"
                            class="link-to-prism">libs/document-editor/src/lib/shared/document-editor.service.ts:77</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Manage state changes via observables</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="tabChange"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>tabChange</b></span>
                        <a href="#tabChange"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>tabChange(e: literal type, resetSelection)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="340"
                            class="link-to-prism">libs/document-editor/src/lib/shared/document-editor.service.ts:340</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>When the tab or visible document changes</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>e</td>
                                    <td>
                                            <code>literal type</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>resetSelection</td>
                                    <td>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>true</code>
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section>
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_documentsModel"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>_documentsModel</b></span>
                        <a href="#_documentsModel"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>NtsDocumentEditor.Document[]</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[]</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="55" class="link-to-prism">libs/document-editor/src/lib/shared/document-editor.service.ts:55</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_documentsModelSrc"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>_documentsModelSrc</b></span>
                        <a href="#_documentsModelSrc"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>NtsDocumentEditor.Document[]</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[]</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="54" class="link-to-prism">libs/document-editor/src/lib/shared/document-editor.service.ts:54</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_state"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>_state</b></span>
                        <a href="#_state"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../interfaces/State.html" target="_self" >NtsDocumentEditor.State</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>cloneDeep(stateInitial)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="51" class="link-to-prism">libs/document-editor/src/lib/shared/document-editor.service.ts:51</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_viewModels"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>_viewModels</b></span>
                        <a href="#_viewModels"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>NtsDocumentEditor.Preview[][]</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[]</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="58" class="link-to-prism">libs/document-editor/src/lib/shared/document-editor.service.ts:58</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="documentsModel$"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>documentsModel$</b></span>
                        <a href="#documentsModel$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new BehaviorSubject&lt;NtsDocumentEditor.Document[] | null&gt;(null)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="56" class="link-to-prism">libs/document-editor/src/lib/shared/document-editor.service.ts:56</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="dragIndex"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>dragIndex</b></span>
                        <a href="#dragIndex"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>NtsDocumentEditor.DragSource</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>{
    pdfIndex: 0,
    pageIndex: 0,
    pageSrc: null,
  }</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="61" class="link-to-prism">libs/document-editor/src/lib/shared/document-editor.service.ts:61</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>The index of the page currently being dragged</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="pdfJs"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>pdfJs</b></span>
                        <a href="#pdfJs"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code> | undefined</code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="68" class="link-to-prism">libs/document-editor/src/lib/shared/document-editor.service.ts:68</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="state$"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>state$</b></span>
                        <a href="#state$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new BehaviorSubject(this._state)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="52" class="link-to-prism">libs/document-editor/src/lib/shared/document-editor.service.ts:52</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="subs"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>subs</b></span>
                        <a href="#subs"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>Subscription[]</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[]</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="70" class="link-to-prism">libs/document-editor/src/lib/shared/document-editor.service.ts:70</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="viewModels$"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>viewModels$</b></span>
                        <a href="#viewModels$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>new BehaviorSubject&lt;NtsDocumentEditor.Preview[][] | null&gt;(null)</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="59" class="link-to-prism">libs/document-editor/src/lib/shared/document-editor.service.ts:59</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { BehaviorSubject, combineLatest, Subscription, fromEvent } from &#x27;rxjs&#x27;;
import { distinctUntilChanged, map, filter, debounceTime } from &#x27;rxjs/operators&#x27;;
import { documentModelCreate, documentMerge } from &#x27;./utils/models-create.util&#x27;;
import { viewModelCreate } from &#x27;./utils/view-model-create.util&#x27;;
import { insertAt } from &#x27;./utils/arrays.util&#x27;;
import { isNotNil } from &#x27;./guards/guards.utils&#x27;;
import { NtsDocumentEditor } from &#x27;../document-editor&#x27;;
import { pdfjsDist } from &#x27;./models/pdf&#x27;;
import { Injectable } from &quot;@angular/core&quot;;
import { cloneDeep } from &#x27;lodash&#x27;;

declare global {
  interface Window {
    pdfjsLib: typeof pdfjsDist;
  }
}

const stateInitial: NtsDocumentEditor.State &#x3D; {
  loadingScript: true,
  loadingPdf: true,
  resetting: false,
  pdfSrcs: null,
  pdfs: null,
  pageActive: {
    pdfIndex: 0,
    pageIndex: 0,
  },
  tnSettings: {
    width: 100,
    height: 125,
  },
  multipleAction: &#x27;merge&#x27;,
  settings: {
    canRotate: true,
    canRemove: true,
    canSplit: true,
    canReorder: true,
    canSelect: true,
    canViewFull: true,
    canReset: false,
  },
  selection: [],
  docActive: 0,
  pdfInfo: [],
  error: null,
  scrollPosition: null,
};

@Injectable()
export class DocumentEditorService {
  private _state: NtsDocumentEditor.State &#x3D; cloneDeep(stateInitial);
  public state$ &#x3D; new BehaviorSubject(this._state);

  private _documentsModelSrc: NtsDocumentEditor.Document[] &#x3D; [];
  private _documentsModel: NtsDocumentEditor.Document[] &#x3D; [];
  public documentsModel$ &#x3D; new BehaviorSubject&lt;NtsDocumentEditor.Document[] | null&gt;(null);

  private _viewModels: NtsDocumentEditor.Preview[][] &#x3D; [];
  public viewModels$ &#x3D; new BehaviorSubject&lt;NtsDocumentEditor.Preview[][] | null&gt;(null);
  /** The index of the page currently being dragged */
  public dragIndex: NtsDocumentEditor.DragSource &#x3D; {
    pdfIndex: 0,
    pageIndex: 0,
    pageSrc: null,
  };

  // private pdfs: pdfjsDist.PDFDocumentProxy[] | undefined;
  public pdfJs: typeof pdfjsDist | undefined;

  public subs: Subscription[] &#x3D; [];

  constructor() {}

  /**
   * Manage state changes via observables
   */
  public stateChanges() {
    // Add state change subs
    this.subs &#x3D; [
      combineLatest([
        // When pdf sources are available
        this.state$.pipe(
          map(state &#x3D;&gt; state.pdfSrcs),
          // filter(x &#x3D;&gt; x !&#x3D;&#x3D; null),
          distinctUntilChanged(),
        ),
        // Get how to handle multiple documents
        this.state$.pipe(
          map(state &#x3D;&gt; state.multipleAction),
          distinctUntilChanged(),
        ),
        // Wait till the script is finished loading
        this.state$.pipe(
          map(state &#x3D;&gt; state.loadingScript),
          filter(x &#x3D;&gt; !x),
          distinctUntilChanged(),
        ),
      ]).subscribe(([pdfSrcs, multipleAction]) &#x3D;&gt; {
        if (pdfSrcs) {
          this.getDocument(pdfSrcs, multipleAction);
        }
      }),
      combineLatest([
        this.state$.pipe(
          map(state &#x3D;&gt; state.pdfs),
          filter(x &#x3D;&gt; x !&#x3D;&#x3D; null),
          distinctUntilChanged(),
        ),
        this.state$.pipe(
          map(state &#x3D;&gt; state.tnSettings),
          filter(x &#x3D;&gt; x !&#x3D;&#x3D; null),
          distinctUntilChanged(),
        ),
      ]).subscribe(state &#x3D;&gt; {
        if (!state[0] || !state[1].width || !state[1].height) {
          return;
        }
        this._viewModels &#x3D; viewModelCreate(state[0], state[1].width, state[1].height);
        this.viewModels$.next(this._viewModels);
      }),
    ];
  }

  /**
   * Add a scrollbar for handy reasons
   * TODO: Edge case, cancel previous scrollbar sub before adding new one
   * @param scrollbarRef
   */
  public scrollBarAdd(scrollbarRef: HTMLDivElement) {
    this.subs.push(
      fromEvent(scrollbarRef, &#x27;scroll&#x27;)
        .pipe(
          debounceTime(100),
          filter(x &#x3D;&gt; x.type &#x3D;&#x3D;&#x3D; &#x27;scroll&#x27;),
          map(x &#x3D;&gt; (x &amp;&amp; x.target ? Math.floor((&lt;any&gt;x).target.scrollTop) : 0)),
        )
        .subscribe(x &#x3D;&gt; this.stateChange({ scrollPosition: x })),
    );
  }

  /**
   * Change component state
   * @param state
   */
  public stateChange(state: Partial&lt;NtsDocumentEditor.State&gt;) {
    this._state &#x3D; Object.assign({}, this._state, state);
    this.state$.next(this._state);
  }

  /**
   * Change the state of a page
   * @param index
   * @param stateNew
   */
  public pageStateChange(pageIndex: number, stateNew: Partial&lt;NtsDocumentEditor.Page&gt;) {
    const documentsModel &#x3D; [...this._documentsModel];
    documentsModel[this._state.docActive].pages[pageIndex] &#x3D; Object.assign(
      {},
      documentsModel[this._state.docActive].pages[pageIndex],
      stateNew,
    );
    this._documentsModel &#x3D; documentsModel;
    this.documentsModel$.next(this._documentsModel);
  }

  /**
   * Change the state of all pages
   * @param prop
   * @param value
   */
  public pageStateChangeAll(prop: string, value: string | number | boolean | NtsDocumentEditor.Resolver) {
    console.log(prop, value);
    /**
    this._pageModel &#x3D; this._pageModel.map(page &#x3D;&gt; {
      const val &#x3D; typeof value &#x3D;&#x3D;&#x3D; &#x27;function&#x27; ? value(page[prop]) : value;
      return Object.assign({}, page, { [prop]: val });
    });
    this.pageModels$.next(this._pageModel);
     */
  }

  /**
   * Change the selection status of a page
   * @param pageIndex
   */
  public pageSelectionChange(docIndex: number, pageIndex: number, setSelection?: boolean) {
    // console.log(docIndex, pageIndex)
    const selection &#x3D; [...this._state.selection];
    // If set selection is set to true and the index is not already
    if (selection[docIndex].includes(pageIndex) &amp;&amp; setSelection !&#x3D;&#x3D; true) {
      selection[docIndex] &#x3D; selection[docIndex].filter(i &#x3D;&gt; i !&#x3D;&#x3D; pageIndex).sort();
    } else if (!selection[docIndex].includes(pageIndex)) {
      selection[docIndex] &#x3D; [...selection[docIndex], pageIndex].sort();
    }
    this.stateChange({ selection: selection });
  }

  /**
   * Reset selection
   */
  public pagegSelectionReset() {
    this.stateChange({ selection: this._state.selection.map(() &#x3D;&gt; []) });
  }

  /**
   * Return a page to it&#x27;s original document
   * @param srcDoc
   * @param page
   */
  public pageReset(srcDoc: number, page: NtsDocumentEditor.Page) {
    // Remove the selected page from the source document
    const documentsModel &#x3D; [...this._documentsModel];
    const pagesDestination &#x3D; documentsModel[srcDoc].pages.filter(
      pageDest &#x3D;&gt; pageDest.pdfSrcIndex !&#x3D;&#x3D; page.pdfSrcIndex || pageDest.pageSrcIndex !&#x3D;&#x3D; page.pageSrcIndex,
    );
    documentsModel[srcDoc] &#x3D; { ...documentsModel[srcDoc], pages: pagesDestination };

    // Add the page back to it&#x27;s original document, resort to ensure its in the correct position
    const pagesSource &#x3D; [...documentsModel[page.pdfSrcIndex].pages, page].sort(
      (a, b) &#x3D;&gt; b.pageSrcIndex - a.pageSrcIndex,
    );
    documentsModel[page.pdfSrcIndex] &#x3D; { ...documentsModel[page.pdfSrcIndex], pages: pagesSource };
    // Update doc model
    this._documentsModel &#x3D; documentsModel;
    this.documentsModel$.next(this._documentsModel);
  }

  /**
   * Change the active visible page in the viewer
   * @param pageActive
   */
  public pageActiveChange(pageActive: NtsDocumentEditor.PageActive) {
    this.stateChange({ pageActive: pageActive });
  }

  /**
   * Go to the next available page in the document
   * @param pageActive
   */
  public pageActiveNext() {
    if (!this._state.pdfs) {
      return;
    }
    const max &#x3D; this._state.pdfs[this._state.pageActive.pdfIndex].numPages;
    const pageActive: NtsDocumentEditor.PageActive &#x3D; {
      pdfIndex: this._state.pageActive.pdfIndex,
      pageIndex: this._state.pageActive.pageIndex + 1 &lt;&#x3D; max ? this._state.pageActive.pageIndex + 1 : max,
    };
    this.stateChange({ pageActive: pageActive });
  }

  /**
   * Go to the previous page available in the document
   */
  public pageActivePrevious() {
    if (!this._state.pdfs) {
      return;
    }
    const pageActive: NtsDocumentEditor.PageActive &#x3D; {
      pdfIndex: this._state.pageActive.pdfIndex,
      pageIndex: this._state.pageActive.pageIndex - 1 &lt; 0 ? 0 : this._state.pageActive.pageIndex - 1,
    };
    this.stateChange({ pageActive: pageActive });
  }

  /**
   * Reorder the pages
   * @param from
   * @param to
   */
  public pageReorder(docIndex: number, pageDestination: NtsDocumentEditor.Page | null, side: &#x27;left&#x27; | &#x27;right&#x27;) {
    // console.log(&#x27;pageReorder&#x27;, docIndex, pageDestination, side, this._state.selection);
    let documentsModel &#x3D; [...this._documentsModel];

    // Get an array of pages that were selected
    const pagesSelected &#x3D; documentsModel
      .map((doc, j) &#x3D;&gt;
        doc.pages.filter((_page, i) &#x3D;&gt;
          this._state.selection[j] &amp;&amp; this._state.selection[j].includes(i) ? true : false,
        ),
      )
      .reduce((a, b) &#x3D;&gt; [...a, ...b]);

    // The current list of pages with all selected pages removed
    const pagesWithSelectedRemoved &#x3D; documentsModel.map((doc, j) &#x3D;&gt;
      doc.pages.filter((_page, i) &#x3D;&gt; (this._state.selection[j] &amp;&amp; this._state.selection[j].includes(i) ? false : true)),
    );

    // Determine where to insert the removed pages by finding the page that was dropped onto
    let insertAtIndex &#x3D; 0;
    if (pageDestination) {
      for (let i &#x3D; 0; i &lt;&#x3D; pagesWithSelectedRemoved[docIndex].length; i++) {
        const page &#x3D; pagesWithSelectedRemoved[docIndex][i];
        if (page.pdfSrcIndex &#x3D;&#x3D;&#x3D; pageDestination.pdfSrcIndex &amp;&amp; page.pageSrcIndex &#x3D;&#x3D;&#x3D; pageDestination.pageSrcIndex) {
          insertAtIndex &#x3D; side &#x3D;&#x3D;&#x3D; &#x27;left&#x27; ? i : i + 1;
          break;
        }
      }
    }

    // Handle out of bounds for array items
    if (insertAtIndex &lt; 0) {
      insertAtIndex &#x3D; 0;
    } else if (insertAtIndex &gt; documentsModel[docIndex].pages.length) {
      insertAtIndex &#x3D; documentsModel[docIndex].pages.length - 1;
    }

    // Now inserted the selected pages at the appropriate index
    const pages &#x3D; insertAt(pagesWithSelectedRemoved[docIndex], insertAtIndex, pagesSelected);

    documentsModel &#x3D; documentsModel.map((doc, i) &#x3D;&gt; {
      if (i &#x3D;&#x3D;&#x3D; docIndex) {
        return Object.assign({}, doc, { pages: pages });
      } else {
        return Object.assign({}, doc, { pages: pagesWithSelectedRemoved[i] });
      }
    });

    this.pagegSelectionReset();

    // Update doc model
    this._documentsModel &#x3D; documentsModel;
    this.documentsModel$.next(this._documentsModel);
  }

  /**
   * Reset pages to their original configuration
   * TODO: Reset state too such as selection
   */
  public docReset() {
    this._documentsModel &#x3D; cloneDeep(this._documentsModelSrc);
    this.documentsModel$.next(this._documentsModel);
  }

  /**
   * When the tab or visible document changes
   * @param e
   * @param resetSelection
   */
  public tabChange(e: { originalEvent: MouseEvent; index: number }, resetSelection &#x3D; true) {
    const state: Partial&lt;NtsDocumentEditor.State&gt; &#x3D; {
      docActive: e.index,
      pageActive: {
        pdfIndex: e.index,
        pageIndex: 0,
      },
    };
    // Reset selection on all documents
    if (resetSelection) {
      state.selection &#x3D; this._state.selection.map(() &#x3D;&gt; []);
    }

    this.stateChange(state);
  }

  /**
   * Load pdfJs, set path to worker file
   */
  public scriptsLoad(pdfJsSrc: string, pdfJsWorkerSrc: string) {
    if (window.pdfjsLib) {
      (&lt;any&gt;window).pdfjsLib.GlobalWorkerOptions.workerSrc &#x3D; pdfJsWorkerSrc;
      this.pdfJs &#x3D; window.pdfjsLib;
      this.stateChange({ loadingScript: false });
    } else {
      this.stateChange({ loadingScript: true });
      const script &#x3D; document.createElement(&#x27;script&#x27;);
      script.type &#x3D; &#x27;text/javascript&#x27;;
      script.src &#x3D; pdfJsSrc;
      script.onload &#x3D; () &#x3D;&gt; {
        (&lt;any&gt;window).pdfjsLib.GlobalWorkerOptions.workerSrc &#x3D; pdfJsWorkerSrc;
        this.pdfJs &#x3D; window.pdfjsLib;
        this.stateChange({ loadingScript: false });
      }; // After load, init chart
      document.head.appendChild(script);
    }
  }

  /**
   * Extract the documents from pdf JS, add to state
   * @param srcs
   * @param multipleAction
   */
  public getDocument(srcs: NtsDocumentEditor.InputTypes[] | null, multipleAction: NtsDocumentEditor.MultipleAction) {
    // console.warn(&#x27;getDocument&#x27;, this._state.pdfSrcs, srcs, multipleAction);
    if (!this.pdfJs || !srcs) {
      return;
    }
    this.stateChange({ loadingPdf: true, pdfs: null });
    // Since multiple pages are possible, get array of promises
    const promises &#x3D; srcs
      .map(src &#x3D;&gt; {
        let inputType &#x3D; src;
        // Convert blob type input to object url
        if (src instanceof Blob) {
          inputType &#x3D; URL.createObjectURL(src);
        }
        return this.pdfJs ? this.pdfJs.getDocument(inputType).promise : null;
      })
      .filter(isNotNil);
    // Wait till all promises complete
    Promise.all(promises)
      .then(docs &#x3D;&gt; {
        const model &#x3D; documentModelCreate(docs);
        this._documentsModelSrc &#x3D; multipleAction &#x3D;&#x3D;&#x3D; &#x27;merge&#x27; ? documentMerge(model) : model;
        this._documentsModel &#x3D; cloneDeep(this._documentsModelSrc);
        // console.log(this._documentsModelSrc, this._documentsModel);
        this.documentsModel$.next(this._documentsModel);
        this.stateChange({
          loadingPdf: false,
          pdfs: docs,
          selection: this._documentsModelSrc.map(() &#x3D;&gt; []),
        });
      })
      .catch(err &#x3D;&gt; {
        this.stateChange({ error: err.message, loadingPdf: false, loadingScript: false });
      });
  }

  /**
   * Reset editor state
   */
  public reset() {
    this._documentsModelSrc &#x3D; [];
    this._documentsModel &#x3D; [];
    this.documentsModel$.next(this._documentsModel);
    this._viewModels &#x3D; [];
    this.viewModels$.next(this._viewModels);
    this._state &#x3D; cloneDeep(stateInitial);
    this.state$.next(this._state);
    this._documentsModel &#x3D; [];
    this.subs.forEach(sub &#x3D;&gt; sub.unsubscribe());
    this.subs &#x3D; [];
  }
}
</code></pre>
    </div>

</div>












                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'DocumentEditorService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
